document.addEventListener("DOMContentLoaded",(()=>{let e=document.querySelector("body"),t=new Date,o=t.getFullYear(),l=t.getMonth(),c=t.getDate(),n=new Date(o,l+2,c);$("#start-date").datepicker({minDate:new Date,maxDate:n,autoClose:!0}),document.querySelector("#guest").oninput=function(){this.value=this.value.replace(/[^1-9\.]/g,"")},document.querySelectorAll(".rooms-item-content").forEach((e=>{e.onclick=function(){e.classList.toggle("active")}}));let r=document.querySelector(".burger-menu-wrapper"),a=document.querySelector(".mobile-menu"),u=document.querySelector(".burger-menu");r.onclick=function(){e.classList.toggle("overflow-hidden"),r.classList.toggle("active"),a.classList.toggle("mobile-menu-open"),u.classList.toggle("close")};let s=document.querySelectorAll(".mobile-menu .menu-item a");for(let e=0;e<s.length;e++)s[e].onclick=function(e){e.preventDefault(),d();let t=this.href;setTimeout((function(){location.href=t}),700)};function d(){e.classList.remove("overflow-hidden"),r.classList.remove("active"),a.classList.remove("mobile-menu-open"),u.classList.remove("close")}let i=document.querySelectorAll(".js-callback-btn"),m=document.querySelector(".mobile-menu-callback-btn"),v=document.querySelector("#callback-modal"),q=document.querySelectorAll(".modal-window"),y=document.querySelectorAll(".modal-window .modal-close");for(let e=0;e<i.length;e++)i[e].onclick=function(){f(v)};function f(t){e.classList.add("overflow-hidden"),t.style.display="block",t.childNodes[1].classList.add("active")}m.onclick=function(){d(),f(v)};for(let e=0;e<y.length;e++)y[e].onclick=function(){h(q[e])};for(let e=0;e<q.length;e++)q[e].onclick=function(t){let o=t.target.classList;for(let t=0;t<o.length;t++)"modal-window"!=o[t]&&"modal-wrapper"!=o[t]||h(q[e])};function h(t){e.classList.remove("overflow-hidden"),t.style.display="",t.childNodes[1].classList.remove("active")}document.querySelector(".order-btn").onclick=function(){let e=document.querySelector("#start-date"),t=document.querySelector("#guest");""==e.value?e.classList.add("required"):e.classList.remove("required");""==t.value?t.classList.add("required"):t.classList.remove("required");""!=e.value&&""!=t.value&&(document.querySelector("#modal-start-date").value=e.value,document.querySelector("#modal-guest").value=t.value,document.querySelector("#start-date").value="",document.querySelector("#guest").value="",f(v))};let p=document.querySelector("#callback-modal-form");function g(e){event.preventDefault();let t=e.querySelectorAll(".input-field"),o=[];for(let e=0;e<t.length;e++){t[e].hasAttribute("required")&&""==t[e].value&&(t[e].classList.add("required"),o.push(!1))}if(0==o.length){for(let e=0;e<t.length;e++)t[e].classList.remove("required");let o={name:e.querySelector(".name").value,phone:e.querySelector(".phone").value,startDate:e.querySelector("#modal-start-date").value,guest:e.querySelector("#modal-guest").value,checkbox:e.querySelector(".custom-checkbox").checked},l=new XMLHttpRequest;l.open("post","phpmailer/mailer.php"),l.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8"),l.send("name="+encodeURIComponent(o.name)+"&phone="+encodeURIComponent(o.phone)+"&start_date="+encodeURIComponent(o.startDate)+"&guest="+encodeURIComponent(o.guest)+"&checkbox="+encodeURIComponent(o.checkbox)),alert("Спасибо. Мы свяжемся с вами."),e.reset()}}document.querySelector(".js-callback-modal-btn").onclick=function(e){g(p)},document.querySelector(".city-year").innerText="Миасс "+o}));